<!DOCTYPE html>
<html>
  <head>
    <title>修改个人信息页面</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <link href="css/page.css" type="text/css" rel="stylesheet"/>
    <link href="css/styles.css" type="text/css" rel="stylesheet"/>
    <link href="css/page_css/changeInfo.css" type="text/css" rel="stylesheet"/>
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
  </head>
  <body>
    <div id="base" class="">

      <!-- 背景色 -->
      <div id="u631" class="ax_default" data-label="背景色">
        <div id="u631_state0" class="panel_state" data-label="State1" style>
          <div id="u631_state0_content" class="panel_state_content">
          </div>
        </div>
      </div>

      <!-- 安全信息栏 -->
      <div id="u632" class="ax_default" data-label="安全信息栏" data-left="307" data-top="699" data-width="921" data-height="104">

        <!-- 安全信息栏背景 -->
        <div id="u633" class="ax_default box_1" data-label="安全信息栏背景">
          <div id="u633_div" class=""></div>
          <div id="u633_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- 安全信息栏文字信息 -->
        <div id="u634" class="ax_default _文本段落">
          <div id="u634_div" class=""></div>
          <div id="u634_text" class="text ">
            <p><span>请确保在安全环境下修改个人信息，以免信息泄露造成交易风险。</span></p>
          </div>
        </div>

        <!-- 安全提醒 -->
        <div id="u635" class="ax_default _二级标题">
          <div id="u635_div" class=""></div>
          <div id="u635_text" class="text ">
            <p><span>安全提醒</span></p>
          </div>
        </div>

        <!-- 安全图标图片 -->
        <div id="u636" class="ax_default _图片_">
          <img id="u636_img" class="img " src="images/修改个人信息页面/u636.svg"/>
          <div id="u636_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>
      </div>

      <!-- 个人资料面板 (组合) -->
      <div id="u637" class="ax_default" data-label="个人资料面板" data-left="306.999813074297" data-top="162" data-width="921.000373851406" data-height="517">

        <!-- 我的信息背景 (矩形) -->
        <div id="u638" class="ax_default box_1" data-label="我的信息背景">
          <div id="u638_div" class=""></div>
          <div id="u638_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- 确认修改修改 (组合) -->
        <div id="u639" class="ax_default" data-label="确认修改修改" data-left="1108" data-top="626" data-width="60" data-height="17">

          <!-- Unnamed (矩形) -->
          <div id="u640" class="ax_default _三级标题">
            <div id="u640_div" class=""></div>
            <div id="u640_text" class="text ">
              <p><span>确认修改</span></p>
            </div>
          </div>
        </div>

        <form id="form_changeuserinfo" action="" class="">
          <!-- 个人介绍修改 (组合) -->
          <div id="u641"  class="ax_default" data-label="个人介绍修改" data-left="366.99972722491" data-top="461" data-width="801.00054555018" data-height="131.677500903043">

            <!-- Unnamed (线段) -->
            <div id="u642" class="ax_default line">
              <img id="u642_img" class="img " src="images/修改个人信息页面/u642.svg"/>
              <div id="u642_text" class="text " style="display:none; visibility: hidden">
                <p></p>
              </div>
            </div>

            <!-- Unnamed (矩形) -->
            <div id="u643" class="ax_default _三级标题">
              <div id="u643_div" class=""></div>
              <div id="u643_text" class="text ">
                <p><span>个人介绍：</span></p>
              </div>
            </div>

            <!-- Unnamed (文本域) -->
            <div id="u644" class="ax_default text_field">
              <div id="u644_div" class=""></div>
              <textarea id="u644_input" name="userInfo" class="u644_input">还没有介绍哦~</textarea>
            </div>
          </div>

          <!-- 电子邮箱修改 (组合) -->
          <div id="u645"  class="ax_default" data-label="电子邮箱修改" data-left="366.99972722491" data-top="394" data-width="801.00054555018" data-height="49.6775009030431">

            <!-- Unnamed (线段) -->
            <div id="u646" class="ax_default line">
              <img id="u646_img" class="img " src="images/修改个人信息页面/u642.svg"/>
              <div id="u646_text" class="text " style="display:none; visibility: hidden">
                <p></p>
              </div>
            </div>

            <!-- Unnamed (文本框) -->
            <div id="u647" class="ax_default text_field">
              <div id="u647_div" class=""></div>
              <input id="u647_input" name="email" type="text" value="1234567890@163.com" class="u647_input"/>
            </div>

            <!-- Unnamed (矩形) -->
            <div id="u648" class="ax_default _三级标题">
              <div id="u648_div" class=""></div>
              <div id="u648_text" class="text ">
                <p><span>电子邮箱：</span></p>
              </div>
            </div>
          </div>

          <!-- 手机号码修改 (组合) -->
          <div id="u649" class="ax_default" data-label="手机号码修改" data-left="366.99972722491" data-top="318" data-width="801.00054555018" data-height="49.6775009030431">

            <!-- Unnamed (线段) -->
            <div id="u650" class="ax_default line">
              <img id="u650_img" class="img " src="images/修改个人信息页面/u642.svg"/>
              <div id="u650_text" class="text " style="display:none; visibility: hidden">
                <p></p>
               </div>
            </div>

            <!-- Unnamed (文本框) -->
            <div id="u651" class="ax_default text_field">
              <div id="u651_div" class=""></div>
              <input id="u651_input" name="phone" type="text" value="13612348888" class="u651_input"/>
            </div>

            <!-- Unnamed (矩形) -->
            <div id="u652" class="ax_default _三级标题">
              <div id="u652_div" class=""></div>
              <div id="u652_text" class="text ">
                <p><span>手机号码：</span></p>
              </div>
            </div>
          </div>

          <!-- 用户名修改 (组合) -->
          <div id="u653" class="ax_default" data-label="用户名修改" data-left="366.99972722491" data-top="245" data-width="801.00054555018" data-height="46.677500903043">

            <!-- Unnamed (线段) -->
            <div id="u654" class="ax_default line">
              <img id="u654_img" class="img " src="images/修改个人信息页面/u642.svg"/>
              <div id="u654_text" class="text " style="display:none; visibility: hidden">
                <p></p>
              </div>
            </div>

            <!-- Unnamed (文本框) -->
            <div id="u655" class="ax_default text_field">
              <div id="u655_div" class=""></div>
              <input id="u655_input" name="userName" type="text" value="小租" class="u655_input"/>
            </div>

            <!-- Unnamed (矩形) -->
            <div id="u656" class="ax_default _三级标题">
              <div id="u656_div" class=""></div>
              <div id="u656_text" class="text ">
                <p><span>用户名：</span></p>
              </div>
            </div>
          </div>

        </form>

        <!-- Unnamed (线段) -->
        <div id="u657" class="ax_default line">
          <img id="u657_img" class="img " src="images/用户信息页面/u607.svg"/>
          <div id="u657_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u658" class="ax_default _二级标题">
          <div id="u658_div" class=""></div>
          <div id="u658_text" class="text ">
            <p><span>个人资料</span></p>
          </div>
        </div>
      </div>

      <!-- 分块固定条 (动态面板) -->
      <div id="u659" class="ax_default" data-label="分块固定条">
        <div id="u659_state0" class="panel_state" data-label="State1" style>
          <div id="u659_state0_content" class="panel_state_content">
          </div>
        </div>
      </div>

      <!-- 搜索项 (组合) -->
      <div id="u660" class="ax_default" data-label="搜索项" data-left="159" data-top="45" data-width="1248" data-height="84">

        <!-- 搜索框 (组合) -->
        <div id="u661" class="ax_default" data-label="搜索框" data-left="1032" data-top="68" data-width="375" data-height="34">

          <!-- 搜索框 (文本框) -->
          <div id="u662" class="ax_default text_field" data-label="搜索框">
            <div id="u662_div" class=""></div>
            <input id="u662_input" type="text" value="" class="u662_input"/>
          </div>

          <!-- 搜索框 (文本框) -->
          <div id="u663" class="ax_default text_field" data-label="搜索框">
            <div id="u663_div" class=""></div>
            <input id="u663_input" type="text" value="搜索" class="u663_input"/>
          </div>

          <!-- 搜索图标 (图片 ) -->
          <div id="u664" class="ax_default _图片_" data-label="搜索图标">
            <img id="u664_img" class="img " src="images/主页面/搜索图标_u321.svg"/>
            <div id="u664_text" class="text " style="display:none; visibility: hidden">
              <p></p>
            </div>
          </div>
        </div>

        <!-- logo (图片 ) -->
        <div id="u665" class="ax_default _图片_" data-label="logo">
          <a href="index.html"><img id="u665_img" class="img " src="images/主页面/logo_u322.svg"/></a>
          <div id="u665_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (菜单) -->
        <div id="u666" class="ax_default">
          <img id="u666_menu" class="img " src="images/主页面/u325.png" alt="u666_menu"/>

          <!-- Unnamed (表格) -->
          <div id="u667" class="ax_default">

            <!-- Unnamed (菜单项) -->
            <div id="u668" class="ax_default menu_item">
              <img id="u668_img" class="img " src="images/主页面/u325.png"/>
              <div id="u668_text" class="text ">
                <p><span>设置</span></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 顶部导航条 (组合) -->
      <div id="u669" class="ax_default" data-label="顶部导航条" data-left="0" data-top="0" data-width="1536" data-height="34">

        <!-- 顶部固定栏 (动态面板) -->
        <div id="u670" class="ax_default" data-label="顶部固定栏">
          <div id="u670_state0" class="panel_state" data-label="State1" style>
            <div id="u670_state0_content" class="panel_state_content">
            </div>
          </div>
        </div>

        <!-- 我的订单 (动态面板) -->
        <div id="u671" class="ax_default" data-label="我的订单">
          <div id="u671_state0" class="panel_state" data-label="我的订单" style>
            <div id="u671_state0_content" class="panel_state_content">

              <!-- Unnamed (菜单) -->
              <div id="u672" class="ax_default">
                <img id="u672_menu" class="img " src="images/主页面/u336_menu.png" alt="u672_menu"/>

                <!-- Unnamed (表格) -->
                <div id="u673" class="ax_default">

                  <!-- Unnamed (菜单项) -->
                  <div id="u674" class="ax_default menu_item">
                    <img id="u674_img" class="img " src="images/主页面/u338.png"/>
                    <div id="u674_text" class="text ">
                      <p><span>用户：小租</span></p>
                    </div>
                  </div>

                  <!-- Unnamed (菜单项) -->
                  <div id="u675" class="ax_default menu_item">
                    <img id="u675_img" class="img " src="images/主页面/u338.png"/>
                    <div id="u675_text" class="text ">
                      <p><span><a href="userInfo.html" style="text-decoration: none;" target="_self">我的订单</a></span></p>
                    </div>
                  </div>

                  <!-- Unnamed (菜单项) -->
                  <div id="u676" class="ax_default menu_item">
                    <img id="u676_img" class="img " src="images/主页面/u338.png"/>
                    <div id="u676_text" class="text ">
                      <p><span><a href="uploadGoodsInfo.html" style="text-decoration: none;" target="_self">上传商品</a></span></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u677" class="ax_default _三级标题">
          <div id="u677_div" class=""></div>
          <div id="u677_text" class="text ">
            <p><span>您好，欢迎来到荔小租！</span></p>
          </div>
        </div>

        <!-- 地点位置项 (组合) -->
        <div id="u678" class="ax_default" data-label="地点位置项" data-left="178" data-top="4" data-width="75" data-height="27">

          <!-- Unnamed (矩形) -->
          <div id="u679" class="ax_default button">
            <div id="u679_div" class=""></div>
            <div id="u679_text" class="text ">
              <p><span>沧海</span></p>
            </div>
          </div>

          <!-- 地点 (图片 ) -->
          <div id="u680" class="ax_default _图片_" data-label="地点">
            <img id="u680_img" class="img " src="images/主页面/地点_u334.svg"/>
            <div id="u680_text" class="text " style="display:none; visibility: hidden">
              <p></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      $(document).ready( function () {
        $.ajax({
          url:"/users/get_by_id",
          type:"GET",
          data:null,
          dataType:"JSON",
          success: function (json) {
            if(json.state == 200)
            {
              $("#u674_text").html(json.data.userName);
              $("#u655_input").val(json.data.userName);
              $("#u651_input").val(json.data.phone);
              $("#u647_input").val(json.data.email);
              $("#u644_input").val(json.data.userInfo);
            }
          },
          error: function(xhr)
          {
            alert("获取个人信息时产生未知的错误！"+xhr.status);
          }
        })

      })
    </script>
  <script>
      $("#u640").click( function () {
        $.ajax({
            url:"/users/change_info",
            type:"PUT",
          data:$("#form_changeuserinfo").serialize(),
          dataType:"JSON",
          success: function (json) {
            if(json.state == 200)
            {
              window.location.href = "userInfo.html";
              alert("修改成功");
            }
            else if(json.state == 4041)
            {
              alert("用户名不存在");
            }
          },
          error: function (xhr){
            alert("修改个人信息时产生未知的错误！"+xhr.status);
          }
        })
      })
  </script>
  </body>
</html>
